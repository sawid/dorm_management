{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar getFileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', getFileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar AttachmentList = function (_a) {\n  var files = _a.files;\n  var containerRef = React__namespace.useRef();\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var attachmentItemsRef = React__namespace.useRef([]);\n  var clickDownloadLabel = l10n && l10n.attachment ? l10n.attachment.clickToDownload : 'Click to download';\n\n  var handleKeyDown = function (e) {\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (items, activeEle) {\n          return items.indexOf(activeEle) + 1;\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        moveToItem(function (items, activeEle) {\n          return items.indexOf(activeEle) - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (items, _) {\n          return items.length - 1;\n        });\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var moveToItem = function (getItemIndex) {\n    var container = containerRef.current;\n    var attachmentItems = [].slice.call(container.getElementsByClassName('rpv-attachment__item'));\n\n    if (attachmentItems.length === 0) {\n      return;\n    }\n\n    attachmentItems.forEach(function (item) {\n      return item.setAttribute('tabindex', '-1');\n    });\n    var activeEle = document.activeElement;\n    var targetIndex = Math.min(attachmentItems.length - 1, Math.max(0, getItemIndex(attachmentItems, activeEle)));\n    var targetEle = attachmentItems[targetIndex];\n    targetEle.setAttribute('tabindex', '0');\n    targetEle.focus();\n  };\n\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var attachmentItems = [].slice.call(container.getElementsByClassName('rpv-attachment__item'));\n    attachmentItemsRef.current = attachmentItems;\n\n    if (attachmentItems.length > 0) {\n      var firstItem = attachmentItems[0];\n      firstItem.focus();\n      firstItem.setAttribute('tabindex', '0');\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    \"data-testid\": \"attachment__list\",\n    className: core.classNames({\n      'rpv-attachment__list': true,\n      'rpv-attachment__list--rtl': isRtl\n    }),\n    ref: containerRef,\n    tabIndex: -1,\n    onKeyDown: handleKeyDown\n  }, files.map(function (file) {\n    return React__namespace.createElement(\"button\", {\n      className: \"rpv-attachment__item\",\n      key: file.fileName,\n      tabIndex: -1,\n      title: clickDownloadLabel,\n      type: \"button\",\n      onClick: function () {\n        return downloadFile(file.fileName, file.data);\n      }\n    }, file.fileName);\n  }));\n};\n\nvar AttachmentLoader = function (_a) {\n  var doc = _a.doc;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n  var noAttachmentLabel = l10n && l10n.attachment ? l10n.attachment.noAttachment : 'There is no attachment';\n\n  var _b = React__namespace.useState({\n    files: [],\n    isLoaded: false\n  }),\n      attachments = _b[0],\n      setAttachments = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getAttachments().then(function (response) {\n      var files = response ? Object.keys(response).map(function (file) {\n        return {\n          data: response[file].content,\n          fileName: response[file].filename\n        };\n      }) : [];\n      setAttachments({\n        files: files,\n        isLoaded: true\n      });\n    });\n  }, [doc]);\n  return !attachments.isLoaded ? React__namespace.createElement(core.Spinner, null) : attachments.files.length === 0 ? React__namespace.createElement(\"div\", {\n    \"data-testid\": \"attachment__empty\",\n    className: core.classNames({\n      'rpv-attachment__empty': true,\n      'rpv-attachment__empty--rtl': isRtl\n    })\n  }, noAttachmentLabel) : React__namespace.createElement(AttachmentList, {\n    files: attachments.files\n  });\n};\n\nvar AttachmentListWithStore = function (_a) {\n  var store = _a.store;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(AttachmentLoader, {\n    doc: currentDoc\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-attachment__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\n\nvar attachmentPlugin = function () {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({});\n  }, []);\n\n  var AttachmentsDecorator = function () {\n    return React__namespace.createElement(AttachmentListWithStore, {\n      store: store\n    });\n  };\n\n  return {\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    Attachments: AttachmentsDecorator\n  };\n};\n\nexports.attachmentPlugin = attachmentPlugin;","map":{"version":3,"sources":["C:/Users/Sawid/Desktop/Asset/Project/dorm_management/node_modules/@react-pdf-viewer/attachment/lib/cjs/attachment.js"],"names":["Object","defineProperty","exports","value","React","require","core","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","getFileName","url","str","split","pop","downloadFile","data","blobUrl","URL","createObjectURL","Blob","type","link","document","createElement","style","display","href","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","AttachmentList","_a","files","containerRef","useRef","l10n","useContext","LocalizationContext","direction","ThemeContext","isRtl","TextDirection","RightToLeft","attachmentItemsRef","clickDownloadLabel","attachment","clickToDownload","handleKeyDown","key","preventDefault","moveToItem","items","activeEle","indexOf","_","length","__","getItemIndex","container","current","attachmentItems","slice","call","getElementsByClassName","item","activeElement","targetIndex","Math","min","max","targetEle","focus","useIsomorphicLayoutEffect","firstItem","className","classNames","ref","tabIndex","onKeyDown","map","file","fileName","title","onClick","AttachmentLoader","doc","noAttachmentLabel","noAttachment","_b","useState","isLoaded","attachments","setAttachments","useEffect","getAttachments","then","response","content","filename","Spinner","AttachmentListWithStore","store","currentDoc","setCurrentDoc","handleDocumentChanged","subscribe","unsubscribe","attachmentPlugin","useMemo","createStore","AttachmentsDecorator","onDocumentLoad","props","update","Attachments"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar getFileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', getFileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar AttachmentList = function (_a) {\n    var files = _a.files;\n    var containerRef = React__namespace.useRef();\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var attachmentItemsRef = React__namespace.useRef([]);\n    var clickDownloadLabel = l10n && l10n.attachment\n        ? l10n.attachment.clickToDownload\n        : 'Click to download';\n    var handleKeyDown = function (e) {\n        switch (e.key) {\n            case 'ArrowDown':\n                e.preventDefault();\n                moveToItem(function (items, activeEle) { return items.indexOf(activeEle) + 1; });\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                moveToItem(function (items, activeEle) { return items.indexOf(activeEle) - 1; });\n                break;\n            case 'End':\n                e.preventDefault();\n                moveToItem(function (items, _) { return items.length - 1; });\n                break;\n            case 'Home':\n                e.preventDefault();\n                moveToItem(function (_, __) { return 0; });\n                break;\n        }\n    };\n    var moveToItem = function (getItemIndex) {\n        var container = containerRef.current;\n        var attachmentItems = [].slice.call(container.getElementsByClassName('rpv-attachment__item'));\n        if (attachmentItems.length === 0) {\n            return;\n        }\n        attachmentItems.forEach(function (item) { return item.setAttribute('tabindex', '-1'); });\n        var activeEle = document.activeElement;\n        var targetIndex = Math.min(attachmentItems.length - 1, Math.max(0, getItemIndex(attachmentItems, activeEle)));\n        var targetEle = attachmentItems[targetIndex];\n        targetEle.setAttribute('tabindex', '0');\n        targetEle.focus();\n    };\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var attachmentItems = [].slice.call(container.getElementsByClassName('rpv-attachment__item'));\n        attachmentItemsRef.current = attachmentItems;\n        if (attachmentItems.length > 0) {\n            var firstItem = attachmentItems[0];\n            firstItem.focus();\n            firstItem.setAttribute('tabindex', '0');\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { \"data-testid\": \"attachment__list\", className: core.classNames({\n            'rpv-attachment__list': true,\n            'rpv-attachment__list--rtl': isRtl,\n        }), ref: containerRef, tabIndex: -1, onKeyDown: handleKeyDown }, files.map(function (file) { return (React__namespace.createElement(\"button\", { className: \"rpv-attachment__item\", key: file.fileName, tabIndex: -1, title: clickDownloadLabel, type: \"button\", onClick: function () { return downloadFile(file.fileName, file.data); } }, file.fileName)); })));\n};\n\nvar AttachmentLoader = function (_a) {\n    var doc = _a.doc;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var noAttachmentLabel = l10n && l10n.attachment\n        ? l10n.attachment.noAttachment\n        : 'There is no attachment';\n    var _b = React__namespace.useState({\n        files: [],\n        isLoaded: false,\n    }), attachments = _b[0], setAttachments = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getAttachments().then(function (response) {\n            var files = response\n                ? Object.keys(response).map(function (file) {\n                    return {\n                        data: response[file].content,\n                        fileName: response[file].filename,\n                    };\n                })\n                : [];\n            setAttachments({\n                files: files,\n                isLoaded: true,\n            });\n        });\n    }, [doc]);\n    return !attachments.isLoaded ? (React__namespace.createElement(core.Spinner, null)) : attachments.files.length === 0 ? (React__namespace.createElement(\"div\", { \"data-testid\": \"attachment__empty\", className: core.classNames({\n            'rpv-attachment__empty': true,\n            'rpv-attachment__empty--rtl': isRtl,\n        }) }, noAttachmentLabel)) : (React__namespace.createElement(AttachmentList, { files: attachments.files }));\n};\n\nvar AttachmentListWithStore = function (_a) {\n    var store = _a.store;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(AttachmentLoader, { doc: currentDoc })) : (React__namespace.createElement(\"div\", { className: \"rpv-attachment__loader\" },\n        React__namespace.createElement(core.Spinner, null)));\n};\n\nvar attachmentPlugin = function () {\n    var store = React__namespace.useMemo(function () { return core.createStore({}); }, []);\n    var AttachmentsDecorator = function () { return React__namespace.createElement(AttachmentListWithStore, { store: store }); };\n    return {\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        Attachments: AttachmentsDecorator,\n    };\n};\n\nexports.attachmentPlugin = attachmentPlugin;\n"]},"metadata":{},"sourceType":"script"}